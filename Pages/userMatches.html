<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Matches</title>
    <link
      rel="icon"
      type="image/png"
      href="../Images/connect-it-bee-icon.png" />
    <link rel="stylesheet" href="../styles.css" />
  </head>
  <body>
    <div class="background-logo2"></div>
    <div class="header">
      <h3>Match Search</h3>
    </div>
    
    <div class="menu-bar">
      <ul>
        <li>
          <a id="mailLink" href="./userPremMail.html">Mail</a>
        </li>
        <li>
          <a id="profileLink" href="./userProfile.html">Profile</a>
        </li>
        <li>
          <a id="matchesLink" href="./userMatches.html">Matches</a>
        </li>
        <li>
          <a id="eventsLink" href="./userEvents.html">Events</a>
        </li>
        <li>
          <a id="contactLink" href="./userContact.html">Contact</a>
        </li>
        <li>
          <a id="ccLink" href="./userPremCC.html">Payment Info</a>
        </li>
      </ul>
    </div>
    
    <div class="match-container">
      <h2>Enter Your Match Parameters</h2>
      <h3 id="mailLimitWarning" style="color: red"></h3>
      <div style="width: 100%; height: 1px; background-color: rgba(0,0,0,0.5); margin-bottom: 1%;"></div>
      <form id="search-form">
        <div
          style="display: flex; flex-direction: flex-start; margin: 3% 4% 0 4%;">
          
          <div class="dropdown-section">
            <label for="radius">Select Match Radius (km):</label>
            <select id="radius">
              <option value="10">10</option>
              <option value="20">20</option>
              <option value="50">50</option>
              <option value="100">100</option>
            </select>
          </div>

          <div class="dropdown-section">
            <label for="options">Select Technical Interest:</label>
            <select id="options" multiple>
              <option value="Databases">Databases</option>
              <option value="System">System</option>
              <option value="Security">Security</option>
              <option value="Design">Design</option>
              <option value="Crypto">Crypto</option>
              <option value="Mobile">Mobile</option>
            </select>
          </div>
          <div class="dropdown-section">
            <label for="options2">Select Technical Interest:</label>
            <select id="options2" multiple>
              <option value="Python">Python</option>
              <option value="Java">Java</option>
              <option value="JavaScript">JavaScript</option>
              <option value="CSS">CSS</option>
              <option value="SQL">SQL</option>
              <option value="Go">Go</option>
            </select>
          </div>
          <div class="dropdown-section">
            <label for="optionsAge">Age Range:</label>
            <select id="optionsAge" multiple>
              <option value="18-24">18–24</option>
              <option value="25-34">25–34</option>
              <option value="35-44">35–44</option>
              <option value="45-54">45–54</option>
              <option value="55-64">55–64</option>
              <option value="65+">65+</option>
            </select>
          </div>
          <div class="dropdown-section">
            <label for="optionsType">Type:</label>
            <select id="optionsType" multiple>
              <option value="romantic">Romantic</option>
              <option value="professional">Professional</option>
              <option value="friendship">Friendship</option>
              <option value="collaboration">Collaboration</option>
            </select>
          </div>
      </form>
    </div>
       
    <button id="submitButton" type="submit">Submit</button>
    <script>
        // This line from ChatGPT
        // const radioValue = document.querySelector('input[name="choice"]:checked')?.value;

      document.getElementById('submitButton').addEventListener('click', function (){
        let outputElement = document.getElementById('search-results');
        outputElement.textContent = "";

        let text = [
          '[+] 7 Possible Matches Found ',
          'for query: '
        ];
        for (var i = 0; i < document.forms[0][0].length; ++i) {
          text.push(document.forms[0][0][i].selected === true ? document.forms[0][0][i].value + ' | ' : '');
        }
        for (var i = 0; i < document.forms[0][1].length; ++i) {
          text.push(document.forms[0][1][i].selected === true ? document.forms[0][1][i].value + ' | ' : '');
        }
        for (var i = 0; i < document.forms[0][2].length; ++i) {
          text.push(document.forms[0][2][i].selected === true ? document.forms[0][2][i].value + ' | ' : '');
        }
        for (var i = 0; i < document.forms[0][3].length; ++i) {
          text.push(document.forms[0][3][i].selected === true ? document.forms[0][3][i].value + ' | ' : '');
        }
        for (var i = 0; i < document.forms[0][4].length; ++i) {
          text.push(document.forms[0][4][i].selected === true ? document.forms[0][4][i].value + ' | ' : '');
        }
        
        for (var i = 0; i < text.length; ++i) {
          setTimeout(yow(text[i]), 400);
        }
        function yow(texto) {
          let outputElement = document.getElementById('search-results');
          outputElement.textContent += texto;
        }

        if (!username.includes('joe')) {
          var q = document.getElementById('mailLimitWarning');
          q.innerHTML = "As free user, you have 3 searches left...";
        }

      });



    </script>
    <div>
      <textarea id='search-results' placeholder='Search results' readonly style="font-size: 1.5em; color: rgba(0,255,0,1); background-color: black; width: 60%; height: 200px; margin-top: 2%;">

      </textarea>
    </div>
    <button id="clearButton" type="submit">Clear</button>
    <script>
      document.getElementById('clearButton').addEventListener('click', function(){
        document.getElementById('search-results').value = '';
      });
      
      document
        .getElementById('search-form')
        .addEventListener('submit', function (event) {
          event.preventDefault();
          alert('Searching for matches...');
          const select = document.getElementById('options2');
          const selected = Array.from(select.selectedOptions).map(
            (option) => option.value
          );
          console.log('Selected options:', selected);

          
          var q = document.getElementById('mailLimitWarning').innerHTML = "As free user, you have 3 searches left";
        });

      const urlParams = new URLSearchParams(window.location.search);
      const username = urlParams.get('username');

      // document.getElementById('user-name').textContent = username;
      document
        .getElementById('profileLink')
        .addEventListener('click', function (event) {
          this.href =
            './userProfile.html?username=' + encodeURIComponent(username);
        });
      document
        .getElementById('mailLink')
        .addEventListener('click', function (event) {
          this.href =
            './userPremMail.html?username=' + encodeURIComponent(username);
        });
      document
        .getElementById('matchesLink')
        .addEventListener('click', function (event) {
          this.href =
            './userMatches.html?username=' + encodeURIComponent(username);
        });
      document
        .getElementById('eventsLink')
        .addEventListener('click', function (event) {
          this.href =
            './userEvents.html?username=' + encodeURIComponent(username);
        });
      document
        .getElementById('contactLink')
        .addEventListener('click', function (event) {
          this.href =
            './userContact.html?username=' + encodeURIComponent(username);
        });
      document
        .getElementById('ccLink')
        .addEventListener('click', function (event) {
          this.href =
            './userPremCC.html?username=' + encodeURIComponent(username);
        });
    </script>
  </body>
</html>
